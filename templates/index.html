<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ«ì ê·¸ë¦¼íŒ - AI ìˆ«ì ì¸ì‹</title>
    <style>
        body { font-family: 'Arial', sans-serif; background: #e3eafc; margin: 0; padding: 0; }
        .container { max-width: 900px; margin: 30px auto; background: #fff; border-radius: 12px; box-shadow: 0 4px 24px #0001; padding: 24px; }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { margin: 0; font-size: 2.2em; color: #2d5be3; }
        .header p { color: #555; margin: 8px 0 0 0; }
        .main-content { display: flex; gap: 24px; }
        .canvas-section { flex: 2; height: 400px; }
        .controls-section { flex: 1; }
        .canvas-container { border: 2px solid #d0d7e6; border-radius: 8px; background: #fff; width: 100%; height: 100%; }
        #drawingCanvas { display: block; background: #fff; cursor: crosshair; width: 100%; height: 100%; }
        .instructions { background: #f0f4ff; border-left: 4px solid #2d5be3; padding: 12px; border-radius: 6px; margin-bottom: 18px; }
        .instructions ul { margin: 0; padding-left: 18px; }
        .instructions li { margin-bottom: 4px; }
        .btn { padding: 8px 18px; border: none; border-radius: 5px; cursor: pointer; font-size: 15px; font-weight: bold; margin-right: 8px; }
        .btn-primary { background: #2d5be3; color: #fff; }
        .btn-danger { background: #e74c3c; color: #fff; }
        .result-section { margin-top: 18px; background: #f8fafd; border-left: 4px solid #2d5be3; border-radius: 6px; padding: 12px; }
        .result-text { font-size: 1.1em; color: #222; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ–Œï¸ ìˆ«ì ê·¸ë¦¼íŒ - AI ìˆ«ì ì¸ì‹</h1>
            <p>ë§ˆìš°ìŠ¤ë¡œ 0~9 ì¤‘ í•˜ë‚˜ì˜ ìˆ«ìë¥¼ ê·¸ë ¤ë³´ì„¸ìš”!<br>AIê°€ ì–´ë–¤ ìˆ«ìì¸ì§€ ì˜ˆì¸¡í•´ì¤ë‹ˆë‹¤.</p>
        </div>
        <div class="main-content">
            <div class="canvas-section">
                <div class="canvas-container">
                    <canvas id="drawingCanvas"></canvas>
                </div>
            </div> 
            <div class="controls-section"> 
                <div class="instructions">
                    <ul>
                        <li>ë§ˆìš°ìŠ¤ë¡œ 0~9 ì¤‘ í•˜ë‚˜ì˜ ìˆ«ìë¥¼ ê·¸ë ¤ì£¼ì„¸ìš”</li>
                        <li>"ë¶„ì„í•˜ê¸°" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ AIê°€ ìˆ«ìë¥¼ ì˜ˆì¸¡í•©ë‹ˆë‹¤</li>
                        <li>"ì§€ìš°ê¸°" ë²„íŠ¼ìœ¼ë¡œ ìº”ë²„ìŠ¤ë¥¼ ì´ˆê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                        <li style="color:#d32f2f;font-weight:bold;">â€» ìˆ«ì(0~9)ë§Œ ì¸ì‹ ê°€ëŠ¥í•©ë‹ˆë‹¤!</li>
                    </ul>
                </div>
                <button class="btn btn-primary" onclick="analyzeDrawing()">ë¶„ì„í•˜ê¸°</button>
                <button class="btn btn-danger" onclick="clearCanvas()">ì§€ìš°ê¸°</button>
                <div class="result-section" id="resultSection" style="display: none;">
                    <h3>ë¶„ì„ ê²°ê³¼</h3>
                    <p class="result-text" id="resultText"></p>
                </div>
            </div>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0, lastY = 0;
        function initCanvas() {
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        canvas.addEventListener('mousedown', e => {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        });
        canvas.addEventListener('mousemove', e => {
            if (!isDrawing) return;
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 10;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            [lastX, lastY] = [e.offsetX, e.offsetY];
        });
        canvas.addEventListener('mouseup', () => isDrawing = false);
        canvas.addEventListener('mouseout', () => isDrawing = false);
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            document.getElementById('resultSection').style.display = 'none';
        }
        async function analyzeDrawing() {
            const imageData = canvas.toDataURL('image/png');
            const response = await fetch('/analyze', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ image: imageData })
            });
            const data = await response.json();
            if (data.result) {
                document.getElementById('resultText').textContent = data.result;
                document.getElementById('resultSection').style.display = 'block';
            } else {
                document.getElementById('resultText').textContent = 'ì˜¤ë¥˜: ' + data.error;
                document.getElementById('resultSection').style.display = 'block';
            }
        }
        // JSì—ì„œ canvas í¬ê¸°ë¥¼ ë¶€ëª¨(container)ì— ë§ê²Œ ë™ì ìœ¼ë¡œ ì„¤ì •
        const container = document.querySelector('.canvas-container');
        canvas.width = container.clientWidth;
        canvas.height = container.clientHeight;
        initCanvas();
    </script>
</body>
</html> 